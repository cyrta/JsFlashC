<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">


	<meta http-equiv="Expires" content="0" />
	<meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate" />
	<meta http-equiv="Cache-Control" content="post-check=0, pre-check=0" />
	<meta http-equiv="Pragma" content="no-cache" />

	<title>JsFlashC - interface testing</title>
	<meta name="description" content="">
	<meta name="author" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="apple-touch-icon" href="/apple-touch-icon.png">
	
	<!-- <link rel="stylesheet" href="style.css?v=2"> -->
	<!-- <link rel="stylesheet" media="handheld" href="css/handheld.css?v=2"> -->

    
    <!-- <script src="script.js"></script> -->
    

  <style>
	body, html {

		
	    border:none;
    	overflow:hidden;
    	position:fixed;
    	top:0;
    	bottom:0;
    	left:0;
    	right:0;
    	-webkit-transition:background 1s;
    	margin:0;
    	padding:0;
    	line-height: normal;
    
     	font-family: "Helvetica Neue", Helvetica, Verdana, Arial, sans-serif;
     	font-size: 15px;
      	text-rendering: optimizeLegibility;
      	min-width: 800px;
      	overflow: hidden;
        -webkit-font-smoothing: antialiased;
        
        background-color: #E0E0E0;
  	}

  	div {
    	display: block;
  	}
	
	#container {
		width: 100%;
		height: 100%;
		
		margin: 0 auto;
		padding: 0;
		width: 980px;
	}
	
	header {
		position: relative;	
		top: 5px; 
		height: 5%;
		overflow: hidden;
	}
	
	#main {
    	position: relative;
    	
   		height: 90%;
   		width: 100%;
    	margin: 20px auto 20px 0; /*bottom*/
    	padding: 0;


	  	/*border: 1px solid #ababab; border-left: 0; border-right: 0;*/
    	background: transparent;
    	border: 1 solid transparent;

    	-webkit-border-radius: 3px;
    	-moz-border-radius: 3px;
   		border-radius: 3px;
    	-webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .05), inset 0 1px 0 rgba(255, 255, 255, .75);
    	-moz-box-shadow: 0 1px 0 rgba(0, 0, 0, .05), inset 0 1px 0 rgba(255, 255, 255, .75);
    	box-shadow: 0 1px 0 rgba(0, 0, 0, .05), inset 0 1px 0 rgba(255, 255, 255, .75);
	}
	
	.grayskin #main{
	    background: none repeat scroll 0 0 white;

    	-moz-box-shadow: 0 0 6px #999;
    	-webkit-box-shadow: 0 0 6px #999;
	}
	
	#main-header {
		padding: 10px;
		 text-shadow: 0 1px 0 #DDD;
		 border-bottom: 1px solid #CACACA; border-left: 0; border-right: 0;
	}
	
	#log {
		position: absolute;
		top: 50px; bottom: 0px; left: 0; right: 0;
	}
	
	footer {
   		position: relative;
   		bottom: 10px; 
   		margin: 0 auto;
   		width: 980px;
    	color: #999;	
    	font-size: 9px;
    	font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
    	overflow: hidden;
  }
  
  footer a, a:hover, a:active {
  	text-decoration: none;
  	color: #999;
  }
  h1 {
  	display: inline;
  	
  }
  	ol, ul {	
		list-style: none;
	}
	
	#log-list .log-event div {
		border-bottom: 1px solid #F1F1F1;
		padding: 5px;
		width: 95%;
	}
  </style>

</head>

<body class="grayskin">
  <div id="container">
 	<header>
 	   	<h1> JsFlashC </h1>
 		<span> Javascript <-> Flash (ActionScript) <-> Alchemy (C/C++) communication </span>
 	</header>
 
 	<div id="main">
 		<div id="main-header">
			Event Log:
		</div>
		<div id="log">
		   	<ul id="log-list">
				<!-- <li class="log-event"> <div> log initialized </div> </li> -->
			</ul>
		</div>
	</div>
	
	
 
 	<footer>
 		<a href="http://www.metamedia.pl" > Â© Copyright 2011 Metamedia Technologies </a>
 	</footer>
  </div>
 
  <script src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"> </script>
  <script src="JsFlashC.js"> </script>
  
  <script>
  
	
   /****** 3rd Party ***********/
  	
  	// FlashDetect, by Carl Yestrau
	// http://www.featureblend.com/license.txt
	var FlashDetect=new function(){var self=this;self.installed=false;self.raw="";self.major=-1;self.minor=-1;self.revision=-1;self.revisionStr="";var activeXDetectRules=[{"name":"ShockwaveFlash.ShockwaveFlash.7","version":function(obj){return getActiveXVersion(obj);}},{"name":"ShockwaveFlash.ShockwaveFlash.6","version":function(obj){var version="6,0,21";try{obj.AllowScriptAccess="always";version=getActiveXVersion(obj);}catch(err){}
	return version;}},{"name":"ShockwaveFlash.ShockwaveFlash","version":function(obj){return getActiveXVersion(obj);}}];var getActiveXVersion=function(activeXObj){var version=-1;try{version=activeXObj.GetVariable("$version");}catch(err){}
	return version;};var getActiveXObject=function(name){var obj=-1;try{obj=new ActiveXObject(name);}catch(err){}
	return obj;};var parseActiveXVersion=function(str){var versionArray=str.split(",");return{"raw":str,"major":parseInt(versionArray[0].split(" ")[1],10),"minor":parseInt(versionArray[1],10),"revision":parseInt(versionArray[2],10),"revisionStr":versionArray[2]};};var parseStandardVersion=function(str){var descParts=str.split(/ +/);var majorMinor=descParts[2].split(/\./);var revisionStr=descParts[3];return{"raw":str,"major":parseInt(majorMinor[0],10),"minor":parseInt(majorMinor[1],10),"revisionStr":revisionStr,"revision":parseRevisionStrToInt(revisionStr)};};var parseRevisionStrToInt=function(str){return parseInt(str.replace(/[a-zA-Z]/g,""),10)||self.revision;};self.majorAtLeast=function(version){return self.major>=version;};self.FlashDetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var type='application/x-shockwave-flash';var mimeTypes=navigator.mimeTypes;if(mimeTypes&&mimeTypes[type]&&mimeTypes[type].enabledPlugin&&mimeTypes[type].enabledPlugin.description){var version=mimeTypes[type].enabledPlugin.description;var versionObj=parseStandardVersion(version);self.raw=versionObj.raw;self.major=versionObj.major;self.minor=versionObj.minor;self.revisionStr=versionObj.revisionStr;self.revision=versionObj.revision;self.installed=true;}}else if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript){var version=-1;for(var i=0;i<activeXDetectRules.length&&version==-1;i++){var obj=getActiveXObject(activeXDetectRules[i].name);if(typeof obj=="object"){self.installed=true;version=activeXDetectRules[i].version(obj);if(version!=-1){var versionObj=parseActiveXVersion(version);self.raw=versionObj.raw;self.major=versionObj.major;self.minor=versionObj.minor;self.revision=versionObj.revision;self.revisionStr=versionObj.revisionStr;}}}}}();};FlashDetect.release="1.0.3";

	
   /****** DOM manipulation ******/
	
	function _id(sID) {
  		return document.getElementById(sID);
	}
	
	function PushEventLogText(str) {
		var list = _id("log-list");
		list.innerHTML += '<li class="log-event"> <div>' + str + '</div></li>';
	}
	
	
   /****** Testing **********/
	
	function checkFlashPlugin() {
    	var fd = FlashDetect;
   		var hasFlash = fd.installed;
    	//var isSupported = (hasFlash && fd.major >= soundManager.flashVersion);
    	var flashVersion = fd.major+'.'+fd.minor+'.'+fd.revisionStr;
    	if (hasFlash) {
    		PushEventLogText("Flash Player version:  " + flashVersion);
	    	return true;
    	} else {
    		PushEventLogText("Flash Player: missing!!!");
		    return false;
    	}  	
	}
	
	function createSwfObject() {
		
		if (swfobject.hasFlashPlayerVersion("10")) {
			var att = { data:"JsFlashC.swf", width:"1", height:"1" };
		  var par = { menu:"false" };
		  var id = "flashObject";
		  var myFlashContent = swfobject.createSWF(att, par, id);
			if (myFlashContent === 'undefined') {
				PushEventLogText("SWF Object: created.");
			} else {
				PushEventLogText("[ERROR] SWF Object: not created.");
			}
		} else {
			PushEventLogText("SWF Object: need Flash Player version  10.0 or greater.");
		}
		//		
		return false;
	}
	
	function checkFlashToJs() {
		//PushEventLogText("Flash->JS:  version=0.1 ");
		return false;
	}
	
	function checkJsToFlash() {
		//PushEventLogText("JS->Flash:  version=0.1 ");
		return false;
	}
	
	function checkJsToC() {
		//PushEventLogText("JS->C:  version=0.1 ");
		return false;
	}
	
	function checkCToJs() {
		//PushEventLogText("C->JS:  version=0.1 ");
		return false;
	}
	
	function checkSound() {
		//PushEventLogText("Sound check:  ... ");
		return false;
	}
	
	
	
	function startTesting() {
		PushEventLogText("Log: initialized.");
		var hasFlash = checkFlashPlugin();
		if (hasFlash) {
			createSwfObject();
			checkFlashToJs();
			checkJsToFlash();
			checkJsToC();
			checkCToJs();
			checkSound();
		}
	}
	
	if (document.addEventListener) {
  		document.addEventListener("DOMContentLoaded", startTesting, false);
	} else {
  		window.onload = startTesting;
	}
  </script>
</body>
</html>	